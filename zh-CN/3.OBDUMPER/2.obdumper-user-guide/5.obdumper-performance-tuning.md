性能调优 
=========================

OBDUMPER 的性能可从命令行选项、虚拟机内存和数据库内核等三方面进行调优。

命令行选项调优 
----------------------------

可通过调整以下命令行参数进行性能调优：


|     参数      |   默认值    |                        说明|
|:----------------|:-------------|:-----------------------------------------------------|
| --thread    | CPU \* 2 | 导出线程的并发数，可以根据具体的情况进行调整。                          |
| --page-size | 10000    | 指定分页查询的记录数，可以根据实际的情况调整大小。<br>例如 `--page-size 20000`。 |


> **说明**
> 调优时可关注 OBDUMPER 运行的机器、OceanBase DataBase Proxy（OBProxy）节点以及 OBServer 集群中的各个节点的资源使用率。其中 OBProxy 所在的机器只需关注网络状态。

虚拟机内存调优 
----------------------------

请修改 bat/shell 脚本中的虚拟机内存参数，建议修改为可用物理内存的 60%。

虚拟机内存参数如下所示：


|   **参数调优**    | **默认值** |
|:------------------|:------------|
| -Xms4G -Xmx4G | 4 G     |

```JavaScript
vim bin/obdumper

 50 JAVA_OPTS="$JAVA_OPTS -server -Xms4G -Xmx4G -XX:MetaspaceSize=512M -XX:MaxMetaspaceSize=512M -Xss352K"
 ```


数据库内核调优 
----------------------------

建议在导出数据前，手动触发一次合并，在合并完毕后再尝试导出数据。

关于合并操作的详细信息，请参见《OceanBase 数据库管理员指南》中的 合并管理 章节。

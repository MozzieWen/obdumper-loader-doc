命令行参数 
==========================

OBLOADER 通过命令行参数指定导入时所需的信息。 

命令示例 
-------------------------

导入命令的示例语句如下，更多参数详情和使用示例，请参见 [参数列表](#section-y7b-65g-p1e) 与 [常见场景](/en-US/2.OBLOADER/2.obloader-user-guide/7.obloader-scenarios.md)。
**注意**



当连接至 OceanBase DataBase Proxy（OBProxy） 时，参数 `-h` 和 `-P` 的值为 OBProxy 的主机 IP 和端口号，且需使用参数 `-c` 指定连接的集群名。当直接连接至 OBServer 时，无需使用参数 `-c` 指定连接的集群名。

```shell
[admin@localhost]>./obloader  -h <主机IP> -P <端口> -u <用户> -p <密码>  --sys-password <sys 租户下的账户密码> -c <集群> -t <租户> -D <--database> [--ddl] [--csv|--sql] [--all|--table '表名'] -f<数据文件或者目录>
```



参数列表 
-------------------------



|         参数         | 是否必选 |                                                                                                                                                                                                                                                                                                                                               说明                                                                                                                                                                                                                                                                                                                                                |
|--------------------|------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| -h(--host)         | 是    | 连接 OBProxy 或者 OBServer 的 IP 地址。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| -P(--port)         | 是    | 连接 OBProxy 或者 OBServer 的端口。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| -c(--cluster)      | 否    | 数据库的集群名。直连 OBServer 时无需指定。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| -t(--tenant)       | 否    | 当前用户的租户名。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| -u(--user)         | 是    | 数据库用户名。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| -p(--password)     | 否    | 数据库密码。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| -D(--database)     | 否    | 数据库名。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| -f(--file-path)    | 是    | 指定数据文件所在的目录，或者是数据文件绝对路径。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| --sys-user         | 否    | 指定 sys 租户下某用户，默认是 root@sys 用户。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| --sys-password     | 否    | 指定 sys 租户下某用户的密码，默认为空。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| --public-cloud     | 否    | 使用限制模式导入数据，该模式导入不依赖 `--sys-user`。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| --file-suffix      | 否    | 指定数据文件的后缀名，注意后缀名与文件格式在概念上的区别。支持正则表达式。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| --file-encoding    | 否    | 指定文件编码，默认值 UTF-8。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| --ctl-path         | 否    | 指定控制文件所在目录，控制文件的后缀名是 .ctrl，老版本为 .ctl。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| --map-path         | 否    | 指定数据字段映射文件所在目录。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| --log-path         | 否    | 指定日志文件的输出目录。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| --ddl              | 否    | 导入 DDL 文件。默认文件后缀是 -schema.sql。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| --sql              | 否    | 导入 SQL 文件。默认文件后缀是 .sql。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| --mix              | 否    | 导入结构与数据混合的数据文件。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| --csv              | 否    | 导入 CSV 文件（推荐）。默认文件后缀是 .csv。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| --pos              | 否    | 导入 POS 字节偏移格式的数据文件，文件中的数据是根据定长的字节大小组织。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| --cut              | 否    | 导入 CUT 字符分隔格式的数据文件。区别于 CSV 格式，CUT 格式是指数据使用字符串作为分隔。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| --all              | 否    | 导入所有的数据库对象的结构定义。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| --table            | 否    | 指定待导入的表，多个表用逗号分隔。值为 '\*' 时则导入 -D 库中所有的表。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| --view             | 否    | 指定待导入的视图，多个视图用逗号分隔。值为 '\*' 时则导入-D 库中所有的视图。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| --replace-object   | 否    | 表结构已存在时，替换掉该表结构，不推荐使用。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| --rw               | 否    | 读写线程比例，默认值 0.2   （1 读线程：5 写线程）。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| --slow             | 否    | 指定触发降速 OBServer 内存使用率，默认值 0.75。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| --pause            | 否    | 指定触发暂停 OBServer 内存使用率，默认值 0.85。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| --batch            | 否    | 指定单个事务查询的批量大小，默认值 200。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| --thread           | 否    | 指定工作线程数，默认值 CPU \* 2。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| --block-size       | 否    | 指定文件块切分大小， 默认值 64 MB。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| --retry            | 否    | 是否从最近一次的保存点继续导入（常用于中断尝试）。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| --external-data    | 否    | 标记数据是由第三方工具导出的，不作元信息检查。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| --max-tps          | 否    | 指定导入时的限速，单位行/秒，默认值 Integer.MAX_VALUE。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| --max-wait-timeout | 否    | 最大等待合并操作的超时时间，默认 3 h。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| --trail-delimiter  | 否    | 如果数据是列分隔符结尾，截断掉行尾最后一个列分隔符。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| --with-trim        | 否    | 去掉首尾部空格。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| --skip-header      | 否    | 指定是否跳过 CSV 文件的第一行，默认不跳过。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| --null-string      | 否    | 指定 `NULL` 的替代字符，默认值 \\N。导入后数据不是 \\N 的话说明原值是 NULL 字符串。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| --empty-string     | 否    | 指定空字符（' '）的转义字符，默认值 \\E。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| --line-separator   | 否    | 指定行分隔符，默认值 '\\n'。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| --column-separator | 否    | 指定列分隔符，默认值 ','（英文逗号）。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| --escape-character | 否    | 指定转义字符，默认值 \\。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| --column-delimiter | 否    | 指定引号格式为单引号或双引号，默认值 ' '（单引号）。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| --ignore-unhex     | 否    | `BLOB` 和 `BINARY` 等二进制类型的数据未转换成十六进制字符串，导入时忽略对该数据进行解码。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| --exclude-table    | 否    | * 如指定表名，不导入指定表的结构和数据，例如 `--exclude-table 'a,b,c'`。   * 如不指定表名，则导入所有表结构和表数据，例如 `--exclude-table ''` 。   * 支持用 \* 进行模糊匹配，例如 `--exclude-table '*ab*'`（'\*ab\*'表示表名中包含 ab 字符）。                                                                                                                                                                                                                                                                                                                                                                                                  |
| --column-splitter  | 否    | 定义列分隔串，区别于 CSV 格式单字符的分隔符，数据按照指定的字符串进行分隔。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| --oss-endpoint     | 否    | 填写 Bucket 所在地域对应 Endpoint。 如华东1 (杭州)，Endpoint 填写为 https://oss-cn-hangzhou.aliyuncs.com。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| --access-key       | 否    | 指定云存储的访问账号。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| --secret-key       | 否    | 指定云存储的访问密钥。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| --bucket-uri       | 否    | 指定存储单元标识符。 URI 格式：oss://bucket/key1/key2 例如：oss://oceanbasepublic/tools/obdumper。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| --max-discards     | 否    | 限制单表产生的 discard 数量。 该参数的作用域为单个对象，如导入 A、B 两张表， 如表 A 达到 `max-discards` 限制，则会终止导入表 A 继续导入表 B。 * `--max-discards`=0，告警并停止导入；   * `--max-discards`=N，N 为正整数，在达到 N 条时告警并停止导入；   * `--max-discards`=-1，忽略告警，继续导入。                                                                                                                                                                                                                                                                                                                                  |
| --max-errors       | 否    | 可指定允许的报错数量，支持忽略报错模式 。 (默认最大错误上限为 10，单个线程出错数超过该数量后整个程序会退出)  该参数的作用域为单个对象，如导入 A、B 两张表，若表 A 达到 `max-errors` 限制，则会终止导入表 A 继续导入表 B。 * `--max-errors`=0，报错并停止导入；   * `--max-errors`=N，N 为正整数，在达到 N 条时报错并停止导入；   * `--max-errors`=-1，忽略报错，继续导入。 **注意**  某些报错不可忽略，否则无法继续导入。 具体示例请参见 OBLOADER [常见问题](/en-US/2.OBLOADER/3.obloader-faq.md)![符号带底纹](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1401575361/p346209.jpg) **`--max-errors`** **的哪些报错不可忽略？**    |
| --replace-data     | 否    | 支持增量数据导入，并在主键/唯一键冲突时数据覆盖插入的能力。 支持 `--sql`、`--csv` 和 `--cut`  三种格式，优先支持 `--sql` 格式。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| --truncate-table   | 否    | 指定是否导入前清空表。 不推荐使用，建议您手动进行清理，程序启动时可能报错：查不到分区信息。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |




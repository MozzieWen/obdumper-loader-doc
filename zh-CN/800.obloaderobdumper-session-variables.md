# 连接配置

本文档旨在介绍如何查看和设置数据库内核以及 JDBC 驱动所支持的会话变量。

## 配置方式

通过导数工具连接数据库时，您可以通过 `{ob-loader-dumper}/conf/session.config.json` 文件灵活地更改程序的连接行为。`session.config.json` 是一个程序可读取的 JSON 配置文件，包含了三个方面的配置项：连接初始化 SQL，JDBC URL Options 以及 JDBC 高可用模式。该 JSON 文件中的固定标签包括：

|标签|值类型|说明|父标签|
|-----------------|---------|---------|-------|
|init_sql|map|建立数据库连接后的预执行 sql，用于设置会话变量和系统参数。|-|
|oracle|list|作为 init_sql 的固定子标签，仅适用于 OceanBase Oracle 租户。|init_sql|
|mysql|list|作为 init_sql 的固定子标签，仅适用于 OceanBase MySQL 租户。|init_sql|
|jdbc_url_options|map|JDBC 连接参数。|-|
|jdbc_hamode|string|[JDBC 高可用模式](https://www.oceanbase.com/docs/common-oceanbase-connector-j-cn-10000000001943204)。|-|

可以在 `{ob-loader-dumper}/conf` 目录下查看 `session.config.json` 文件。例如：

```shell
$cd /home/admin/obloaderobdumper/ob-loader-dumper-4.x.x-RELEASE/conf
$cat session.config.json

{
  "init_sql": {
    "oracle": [
      "set names utf8",
      "set autocommit=1",
      "set session ob_query_timeout=300000000",
      "set session ob_trx_timeout=180000000",
      "set session net_read_timeout=86400",
      "set session net_write_timeout=86400",
      "set session sql_select_limit=9223372036854775807",
      "alter session set nls_date_format='YYYY-MM-DD HH24:MI:SS'",
      "alter session set nls_timestamp_format='YYYY-MM-DD HH24:MI:SS:FF9'",
      "alter session set nls_timestamp_tz_format='YYYY-MM-DD HH24:MI:SS.FF TZR TZD'"
    ],
    "mysql": [
      "set names utf8",
      "set autocommit=1",
      "set session ob_query_timeout=300000000",
      "set session ob_trx_timeout=180000000",
      "set session net_read_timeout=86400",
      "set session net_write_timeout=86400",
      "set session sql_select_limit=9223372036854775807",
      "set session sql_mode='STRICT_ALL_TABLES,NO_ZERO_IN_DATE'"
    ]
  },
  "jdbc_url_options": {
    "characterEncoding": "utf8",
    "socketTimeout": 1800000,
    "connectTimeout": 1800000,
    "zeroDateTimeBehavior": "convertToNull",
    "useServerPrepStmts": true,
    "noDatetimeStringSync": true,
    "useCompression": true,
    "log": false,
    "allowMultiQueries": true,
    "useLocalSessionState": true,
    "cachePrepStmts": true,
    "useSqlStringCache": true
  },
  "jdbc_hamode": null
}
```

## 相关文档

- [OBLOADER 命令行选项](500.OBLOADER/200.obloader-command-line-options.md)

- [OBDUMPER 命令行选项](600.OBDUMPER/200.obdumper-command-line-options.md)
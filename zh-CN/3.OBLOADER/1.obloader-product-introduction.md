产品简介 
=========================



什么是 OBLOADER 
---------------------------------

OBLOADER 是一款使用 Java 开发的客户端导入工具。该工具提供了非常灵活的命令行选项，可在多种复杂的场景下，将结构和数据导入到 OceanBase 数据库中。推荐 OBLOADER 与 OBDUMPER 搭配使用，但是在外部业务中，OBLOADER 也支持如 Navicat、Mydumper 和 SQLDeveloper 等工具导出的 SQL 或者 CSV 格式的文件导入。OBLOADER 充分利用 OceanBase 分布式系统的特性，重点优化导入性能和稳定性，以及丰富运行监控信息提升用户体验。

产品功能 
-------------------------

OBLOADER 提供向 OceanBase 数据库导入对象结构和表数据的能力，主要具备以下功能特性：

* 支持导入 Schema 定义语句。

  

* 支持导入标准的 CSV 格式和 SQL 格式的数据文件。

  

* 支持导入字节偏移量，字符串分隔以及结构和数据混合的文件等复杂的数据格式。

  

* 支持导入导出时，配置数据预处理的控制规则以及文件与表之间的字段映射关系。

  

* 支持导入限速、防导爆、断点恢复和自动重试等特性。

  

* 支持指定自定义的日志目录、保存坏数据和冲突数据等特性。

  

* 支持 OBLOADER 从 OSS 云存储中的数据导入到 OceanBase 数据库。

  




支持的 OceanBase 数据库 
--------------------------------------

已支持的 OceanBase 数据库模式与版本，如下表所示：


|    **OceanBase 模式**     |                                        **支持的版本号**                                        |
|-------------------------|------------------------------------------------------------------------------------------|
| OceanBase 数据库 Oracle 模式 | 2.0.x,  2.1.x, 2.2.20、 2.2.30、2.2.50、2.2.70、2.2.71、 2.2.72、2.2.76、3.1.x、3.2.x            |
| OceanBase 数据库 MySQL 模式  | 1.4.70、1.4.72、1.4.75、1.4.78、1.4.79、2.2.30、2.2.50、2.2.70、2.2.71、2.2.72、2.2.76、3.1.x、3.2.x |


**注意**



导数工具 3.0.0 版本已支持 OceanBase 社区版 3.1.2 及之后版本。

注意事项 
-------------------------

* 标准的 CSV 格式请参考 RFC 4180 规范，建议导入时严格遵从 RFC 4180 规范。

  

* 导入大规模的数据量时，请在运行的脚本中修改虚拟机的内存参数。默认参数：-Xms4G -Xmx4G。

  

* 命令行参数指定的对象名、数据文件名、规则文件名要求大小写一致。Oracle 默认大写，MySQL 默认小写。

  

* 导入的数据文件统一的命名规范是 table.group.sequence.suffix。

  

* 数据库中存在有外键的表时，无法保证结构和数据按照依赖顺序导入，可能会导入失败。

  

* 无主键的表，暂不支持中断续传。

  

* 要求指定的对象名与文件名大小写一致。如果数据库中存在大写和小写的对象，那么小写的对象名和文件名需要加上中括号。

  

* OceanBase MySQL 1.4.79 使用 `insert ... where not exists` 解决主键冲突时存在跨分区插入的错误。

  

* Windows 系统不能使用 ！作为分隔符。数据库的对象名也不能包含 \\ / : \* ? " \< \> \| 等任一种符号，否则结构和数据都将无法正常导出。

  

* OceanBase MySQL 1.4.x 组合分区表 RANGE_COLUMNS + KEY 在虚拟路由视图中的元数据有缺陷。

  

* OceanBase Oracle 不支持导入虚拟列的数据。

  

* OBLOADER 支持的文件格式如下：

  




限制模式 
-------------------------

**说明**



限制模式仅适用于用户无法直接提供 `--sys-user` 和 `--sys-password` 选项的场景。

* 限制模式（`--public-cloud`）仅适用于公共云部署的 OceanBase 集群。无需指定 `-t`, `-c` 连接选项。

  

* 用户可指定 `--public-cloud` 选项导入数据。在限制模式下 OBLOADER 不依赖 `sys` 租户下的任何用户，即无需指定 `--sys-user` 和 `--sys-password` 选项。

  

* 如果用户未使用限制模式，OBLOADER 必须依赖 root@sys 或者 proxyro@sys 两个特定的用户。

  

* 限制模式会影响部分导入的功能、性能以及稳定性。OceanBase 2.2.30 及之后版本已支持服务端限流的功能，所以使用限制模式时可通过以下命令设置服务端限流阈值，以保证数据导入的稳定性：

  




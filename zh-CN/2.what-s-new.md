# What's New 

本次 8 月发版的导数工具 3.2.0 旨在优化导入性能，并对导出的时间类型格式进行了完善。



更新功能列表 
---------------------------



|   功能项    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           说明                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
|----------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| OBLOADER |  <ul><li> 客户端分区计算组件版本升级至 1.1.9。 </li>  <li>  导入数据处理性能提升 20%，对 JVM 与系统的资源要求降低 50%。 </li>  <li> 支持全库导入时增加 truncate table 等风险操作的确认环节。</li>  <li> 支持默认情况下启用 UNSAFE 对文件进行粗粒度切分，可以在运行脚本中修改 -Dfile.split=SAFE 对文件进行精确切分。 </li><li> 支持导入生成列（Generated Column）作为分区键的数据。生成列的数据非真实存在，仅在使用时会根据表达式计算出生成列的值，不占用任何存储空间。</li></ul>  |
| OBDUMPER | <ul><li> 新增 `--time-value-format` 选项，控制 MySQL 模式下 Time 类型的导出格式。默认格式：HH:mm:ss，精度值与表定义中的精度值一致。</li>   <li> 新增 `--datetime-value-format` 选项，控制 MySQL 模式下 Datetime 类型的导出格式。默认格式：yyyy-MM-dd HH:mm:ss，精度值与表定义中的精度值一致。 </li>  <li> 新增 `--timestamp-value-format` 选项，控制 MySQL/Oracle 模式下 Timestamp 类型的导出格式。默认格式：yyyy-MM-dd HH:mm:ss，精度值与表定义中的精度值一致。 </li>  <li> 新增 `--timestamp-tz-value-format` 选项，控制 Oracle 模式下 timestamp with time zone 类型的导出格式。默认导出格式：yyyy-MM-dd HH:mm:ss TZR，精度值与表定义中的精度值一致。</li>  <li> 新增 `--date-value-format` 选项，控制 Date 类型的导出格式。OceanBase MySQL 模式下的默认格式：yyyy-MM-dd，OceanBase Oracle 模式下的默认格式：yyyy-MM-dd HH:mm:ss。 </li>  <li> 新增 `--timestamp-ltz-value-format` 选项，控制 Oracle 模式下 timestamp with local time zone 类型的导出格式。默认导出格式：yyyy-MM-dd HH:mm:ss，精度值与表定义中的精度值一致。 </li>  <li> 新增 `--exclude-virtual-columns` 选项，标识不导出创建的生成列的数据（默认导出生成列数据）。详情请参见 [OBDUMPER 命令行选项](4.OBDUMPER/2.obdumper-user-guide/3.obdumper-command-line-options.md)。</li></ul>    |



缺陷修复列表 
---------------------------

* 修复 OBLOADER 适配最新的内核版本号的缺陷。

* 修复使用 OBLOADER 切分文件时程序中断的缺陷。

* 修复使用 OBLOADER 导入数据时监控日志重复打印的缺陷。

* 修复使用 OBLOADER 导入TableGroup 时出现的程序中断的缺陷。

* 修复使用 OBLOADER 在生成列为分区键的表定义中导入数据时报错的缺陷。

* 修复使用 OBLOADER 导入数据时有重复数据但未生成 Discard 文件的缺陷。

* 修复使用 OBLOADER 导入 tinytext、medium text、text 和 langtext 类型的空值变为 `NULL` 的缺陷。

* 修复使用 OBLOADER 导入数据时 `--ignore-unhex` 选项在 `--cut`, `--sql`, `--pos` 格式下失效的缺陷。

* 修复使用 OBLOADER 导入数据未指定 `--ctrl-path` 选项时，OBLOADER 默认从数据目录中查找并使用控制文件的缺陷。

* 修复使用 OBDUMPER 快照查询（`--snapshot`）导出数据时非模版二级分区导出重复数据的缺陷。

* 修复 OceanBase Oracle 模式下使用 OBDUMPER 条件查询导出数据时语法错误的缺陷。 

* 修复使用 OBDUMPER 条件查询中存在 **`or`** 语句时程序重复导出数据且不能正常退出的缺陷。  

* 修复 OceanBase Oracle 模式下使用 OBDUMPER 无法导出 Float 数据类型的缺陷。

* 修复使用 OBDUMPER 自定义查询导出时必须指定表名的缺陷。

* 修复使用 OBDUMPER 导出包含主键表且排除主键列时程序中断的缺陷。

* 修复使用 OBDUMPER 根据 `--sql` 格式自定义查询导出时表名缺失的缺陷。

* 修复使用 OBDUMPER 无法导出 OceanBase MySQL 1.4.x 生成列定义的缺陷。

* 修复使用 OBDUMPER 导出的约束定义缺少空格，容易引发语法解析错误的缺陷。

* 修复使用 OBDUMPER 无法导出 OceanBase MySQL 1.4/2.x/3.x 表组定义的缺陷。

* 修复使用 OBDUMPER 导出 timestamp, time, datetime, timestamp with time zone, timestamp with local time zone 类型时精度值与数据库对象定义中的精度值不一致的缺陷。